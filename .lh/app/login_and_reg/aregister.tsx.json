{
    "sourceFile": "app/login_and_reg/aregister.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1745845035277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1745845511113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,8 +47,9 @@\n         Alert.alert('Error', data.error || 'Registration failed');\r\n       }\r\n     } catch (error) {\r\n       Alert.alert('Error', 'Network request failed');\r\n+      console.log(error)\r\n     }\r\n   };\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1746361882297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n   StatusBar,\r\n   Platform\r\n } from 'react-native';\r\n import { useRouter } from 'expo-router';\r\n-import API_BASE_URL from '../../config';\r\n+import {API_BASE_URL} from '../../config';\r\n \r\n export default function ARegister() {\r\n   const [email, setEmail] = useState('');\r\n   const [password, setPassword] = useState('');\r\n@@ -31,8 +31,9 @@\n       return;\r\n     }\r\n \r\n     try {\r\n+      console.log(\"API_BASE_URL is\", API_BASE_URL);\r\n       const response = await fetch(`${API_BASE_URL}/api/admin/register-admin`, {\r\n         method: 'POST',\r\n         headers: { 'Content-Type': 'application/json' },\r\n         body: JSON.stringify({ email, password })\r\n"
                }
            ],
            "date": 1745845035277,
            "name": "Commit-0",
            "content": "// 📍 Admin Registration Page - aregister.tsx\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Alert,\r\n  StyleSheet,\r\n  StatusBar,\r\n  Platform\r\n} from 'react-native';\r\nimport { useRouter } from 'expo-router';\r\nimport API_BASE_URL from '../../config';\r\n\r\nexport default function ARegister() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const router = useRouter();\r\n\r\n  const handleRegister = async () => {\r\n    if (!email || !password || !confirmPassword) {\r\n      Alert.alert('Error', 'Please fill in all required fields');\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      Alert.alert('Error', 'Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/admin/register-admin`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        Alert.alert('Success', data.message);\r\n        router.push('/login_and_reg/alogin'); // 🔥 After successful registration, go to Admin login\r\n      } else {\r\n        Alert.alert('Error', data.error || 'Registration failed');\r\n      }\r\n    } catch (error) {\r\n      Alert.alert('Error', 'Network request failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <StatusBar barStyle=\"dark-content\" translucent backgroundColor=\"transparent\" />\r\n      <Text style={styles.title}>Admin Registration</Text>\r\n\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"Admin Email\"\r\n        value={email}\r\n        onChangeText={setEmail}\r\n        keyboardType=\"email-address\"\r\n      />\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"Password\"\r\n        value={password}\r\n        onChangeText={setPassword}\r\n        secureTextEntry\r\n      />\r\n      <TextInput\r\n        style={styles.input}\r\n        placeholder=\"Confirm Password\"\r\n        value={confirmPassword}\r\n        onChangeText={setConfirmPassword}\r\n        secureTextEntry\r\n      />\r\n\r\n      <TouchableOpacity style={styles.button} onPress={handleRegister}>\r\n        <Text style={styles.buttonText}>Register</Text>\r\n      </TouchableOpacity>\r\n\r\n      <Text style={styles.switchText}>\r\n        Already have an account?{' '}\r\n        <Text style={styles.link} onPress={() => router.push('/login_and_reg/alogin')}>\r\n          Log In\r\n        </Text>\r\n      </Text>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    marginBottom: 30\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    marginBottom: 15\r\n  },\r\n  button: {\r\n    backgroundColor: '#5089A3',\r\n    padding: 15,\r\n    borderRadius: 8,\r\n    width: '100%',\r\n    alignItems: 'center'\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontWeight: 'bold',\r\n    fontSize: 16\r\n  },\r\n  switchText: {\r\n    marginTop: 20\r\n  },\r\n  link: {\r\n    color: '#5089A3',\r\n    fontWeight: 'bold'\r\n  }\r\n});\r\n"
        }
    ]
}